<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">

<!-- ã‚¹ãƒãƒ›æœ€é©åŒ–ï¼ˆå¿…é ˆï¼‰ -->
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>ãƒ‹ãƒ¥ãƒ¼ã‚¨ã‚¯ã‚¹ãƒ—ãƒ¬ã‚¹ãƒˆãƒ«ã‚³èªï½œå‹•è©æ´»ç”¨ å®Œå…¨ç‰ˆ</title>

<style>
/* ===== åŸºæœ¬ ===== */
body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
  margin: 0;
  background: #f9f9f9;
  line-height: 1.6;
}
h1, h2 {
  text-align: center;
  margin: 8px 0;
}
.container {
  max-width: 640px;
  margin: auto;
  padding: 12px;
  box-sizing: border-box;
}

/* ===== ãƒ˜ãƒƒãƒ€ãƒ¼ ===== */
.header {
  position: sticky;
  top: 0;
  background: #ffffff;
  border-bottom: 1px solid #ddd;
  padding: 8px;
  z-index: 100;
}

/* ===== ãƒ•ã‚©ãƒ¼ãƒ  ===== */
select, button, input {
  width: 100%;
  padding: 14px;
  margin: 6px 0;
  font-size: 1em;
  border-radius: 10px;
  box-sizing: border-box;
}

/* ===== å•é¡Œè¡¨ç¤º ===== */
.question {
  font-size: 1.3em;
  font-weight: bold;
  text-align: center;
  margin: 16px 0;
}

/* ===== é¸æŠè‚¢ ===== */
.choiceBtn {
  background: #eeeeee;
  border: none;
}
.choiceBtn.correct {
  background: #c8f7c5;
}
.choiceBtn.wrong {
  background: #f7c5c5;
}

/* ===== ä¾‹æ–‡ ===== */
#exampleBox {
  margin-top: 12px;
  padding: 10px;
  background: #ffffff;
  border-radius: 8px;
  display: none;
}

/* ===== ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ ===== */
@media (prefers-color-scheme: dark) {
  body {
    background: #121212;
    color: #f0f0f0;
  }
  .header,
  #exampleBox {
    background: #1e1e1e;
  }
  button {
    background: #333333;
    color: #ffffff;
  }
}
</style>
</head>

<body>
<div class="header">
  <h1>ğŸ‡¹ğŸ‡· å‹•è©æ´»ç”¨ãƒˆãƒ¬ãƒ¼ãƒŠãƒ¼ï¼ˆå®Œå…¨ç‰ˆï¼‰</h1>
  <select id="lessonSelect"></select>
</div>

<div class="container">
  <div class="question" id="question"></div>
  <div id="choices"></div>

  <button id="nextBtn">æ¬¡ã®å•é¡Œ</button>

  <button id="toggleExample">ä¾‹æ–‡ã‚’è¦‹ã‚‹</button>
  <div id="exampleBox"></div>
</div>

<script>

/* ========= æ¯éŸ³èª¿å’Œ ========= */
const vowels = ["a","e","Ä±","i","o","Ã¶","u","Ã¼"];
const lastVowel = w => [...w].reverse().find(c=>vowels.includes(c));

function harmonyAE(w){
  return ["e","i","Ã¶","Ã¼"].includes(lastVowel(w)) ? "e" : "a";
}
function harmonyI(w){
  const v = lastVowel(w);
  if(["a","Ä±"].includes(v)) return "Ä±";
  if(["e","i"].includes(v)) return "i";
  if(["o","u"].includes(v)) return "u";
  return "Ã¼";
}

/* ========= èªå¹¹ãƒ»ä¸è¦å‰‡ ========= */
const irregulars = {
  gitmek:{prog:"gid",fut:"gid",aor:"gid",past:"git"},
  yemek:{prog:"yiy",fut:"yiye",aor:"ye",past:"ye"},
  demek:{prog:"diy",fut:"diye",aor:"de",past:"de"},
  etmek:{prog:"ediy",fut:"ede",aor:"ed",past:"et"},
  olmak:{prog:"oluy",fut:"ola",aor:"ol",past:"ol"}
};

function stem(v, form){
  const base = v.verb.replace(/mak$|mek$/,"");
  return irregulars[v.verb]?.[form] || base;
}

/* ========= å­éŸ³å¤‰åŒ– ========= */
const noSoftening = ["bakmak","Ã§Ä±kmak","akmak","korkmak"];
function soften(stem, vowel, verb){
  if(!vowel || noSoftening.includes(verb)) return stem;
  if(stem.endsWith("t")) return stem.slice(0,-1)+"d";
  if(stem.endsWith("k")) return stem.slice(0,-1)+"ÄŸ";
  return stem;
}

/* ========= å‹•è©ï¼ˆç¬¬1ã€œ20èª²ãƒ»æœ€çµ‚ç¢ºå®šï¼‰ ========= */
const verbs = [

  // --- åŸºæœ¬ãƒ»å­˜åœ¨ãƒ»ç§»å‹• ---
  { verb:"olmak", jp:"ã€œã§ã‚ã‚‹ï¼ãªã‚‹" },
  { verb:"yapmak", jp:"ã™ã‚‹" },
  { verb:"gitmek", jp:"è¡Œã" },
  { verb:"gelmek", jp:"æ¥ã‚‹" },

  // --- æ—¥å¸¸å‹•ä½œ ---
  { verb:"okumak", jp:"èª­ã‚€ï¼å‹‰å¼·ã™ã‚‹" },
  { verb:"Ã§alÄ±ÅŸmak", jp:"åƒãï¼å‹‰å¼·ã™ã‚‹" },
  { verb:"yemek", jp:"é£Ÿã¹ã‚‹" },
  { verb:"iÃ§mek", jp:"é£²ã‚€" },

  // --- æ‰€æœ‰ãƒ»æˆå— ---
  { verb:"almak", jp:"è²·ã†ï¼å–ã‚‹" },
  { verb:"vermek", jp:"ä¸ãˆã‚‹" },
  { verb:"taÅŸÄ±mak", jp:"é‹ã¶" },

  // --- å¥½ã¿ãƒ»å¸Œæœ›ãƒ»ä¼šè©± ---
  { verb:"sevmek", jp:"å¥½ãã ï¼æ„›ã™ã‚‹" },
  { verb:"istemek", jp:"æ¬²ã—ã„ï¼ã€œã—ãŸã„" },
  { verb:"konuÅŸmak", jp:"è©±ã™" },
  { verb:"sormak", jp:"å°‹ã­ã‚‹" },

  // --- èªçŸ¥ãƒ»çŸ¥è¦š ---
  { verb:"gÃ¶rmek", jp:"è¦‹ã‚‹" },
  { verb:"bulmak", jp:"è¦‹ã¤ã‘ã‚‹" },
  { verb:"bilmek", jp:"çŸ¥ã£ã¦ã„ã‚‹" },
  { verb:"tanÄ±mak", jp:"çŸ¥ã‚Šåˆã„ã " },
  { verb:"duymak", jp:"èã" },
  { verb:"hissetmek", jp:"æ„Ÿã˜ã‚‹" },

  // --- èƒ½åŠ›ãƒ»æ“ä½œ ---
  { verb:"anlamak", jp:"ç†è§£ã™ã‚‹" },
  { verb:"kullanmak", jp:"ä½¿ã†" },
  { verb:"aÃ§mak", jp:"é–‹ã‘ã‚‹" },
  { verb:"kapatmak", jp:"é–‰ã‚ã‚‹" },

  // --- é–‹å§‹ãƒ»çµ‚äº†ãƒ»ç§»å‹• ---
  { verb:"baÅŸlamak", jp:"å§‹ã‚ã‚‹" },
  { verb:"bitirmek", jp:"çµ‚ãˆã‚‹ï¼ˆä»–å‹•ï¼‰" },
  { verb:"bitmek", jp:"çµ‚ã‚ã‚‹ï¼ˆè‡ªå‹•ï¼‰" },
  { verb:"Ã§Ä±kmak", jp:"å‡ºã‚‹" },
  { verb:"girmek", jp:"å…¥ã‚‹" },
  { verb:"dÃ¶nmek", jp:"æˆ»ã‚‹" },

  // --- å¾…æ©Ÿãƒ»å§¿å‹¢ ---
  { verb:"bakmak", jp:"è¦‹ã‚‹ï¼çœºã‚ã‚‹" },
  { verb:"beklemek", jp:"å¾…ã¤" },
  { verb:"oturmak", jp:"åº§ã‚‹" },

  // --- ç§»å‹•ãƒ»è¡Œç‚º ---
  { verb:"getirmek", jp:"æŒã£ã¦æ¥ã‚‹" },
  { verb:"gezmek", jp:"è¦³å…‰ã™ã‚‹" },

  // --- æ€è€ƒãƒ»åˆ¤æ–­ ---
  { verb:"dÃ¼ÅŸÃ¼nmek", jp:"è€ƒãˆã‚‹" },
  { verb:"inanmak", jp:"ä¿¡ã˜ã‚‹" },
  { verb:"sanmak", jp:"æ€ã†" },

  // --- å¿…è¦ãƒ»å¤‰åŒ– ---
  { verb:"gerekmek", jp:"å¿…è¦ã§ã‚ã‚‹" },
  { verb:"deÄŸiÅŸmek", jp:"å¤‰ã‚ã‚‹" },
  { verb:"artmak", jp:"å¢—ãˆã‚‹" },
  { verb:"azalmak", jp:"æ¸›ã‚‹" },

  // --- çŠ¶æ…‹ ---
  { verb:"kalmak", jp:"æ®‹ã‚‹ï¼ç•™ã¾ã‚‹" },
  { verb:"bulunmak", jp:"å­˜åœ¨ã™ã‚‹" },

  // --- è¨ˆç”» ---
  { verb:"planlamak", jp:"è¨ˆç”»ã™ã‚‹" },

  // --- æ„Ÿæƒ… ---
  { verb:"korkmak", jp:"æ€–ãŒã‚‹" },
  { verb:"sevinmek", jp:"å–œã¶" },

  // --- è¨˜æ†¶ ---
  { verb:"hatÄ±rlamak", jp:"æ€ã„å‡ºã™" },
  { verb:"unutmak", jp:"å¿˜ã‚Œã‚‹" },

];

/* ========= æ–‡æ³•å½¢ï¼ˆå…¨æ–‡æ³•å½¢ãƒ»å…¨äººç§°ï¼‰ ========= */
const grammarForms = [

/* ===== é€²è¡Œå½¢ ===== */
{
 id:"prog_pos", jp:"é€²è¡Œå½¢è‚¯å®šï¼ˆã€œã—ã¦ã„ã‚‹ï¼‰",
 persons:["ben","sen","o","biz","siz"],
 make:(v,p)=>{
  const s = soften(stem(v,"prog"), true, v.verb);
  const i = harmonyI(s);
  return {
    ben:`${s}${i}yorum`, sen:`${s}${i}yorsun`, o:`${s}${i}yor`,
    biz:`${s}${i}yoruz`, siz:`${s}${i}yorsunuz`
  }[p];
 }
},
{
 id:"prog_neg", jp:"é€²è¡Œå½¢å¦å®šï¼ˆã€œã—ã¦ã„ãªã„ï¼‰",
 persons:["ben","sen","o","biz","siz"],
 make:(v,p)=>{
  const s = soften(stem(v,"prog"), true, v.verb);
  const i = harmonyI(s);
  return {
    ben:`${s}m${i}yorum`, sen:`${s}m${i}yorsun`, o:`${s}m${i}yor`,
    biz:`${s}m${i}yoruz`, siz:`${s}m${i}yorsunuz`
  }[p];
 }
},

/* ===== æœªæ¥å½¢ ===== */
{
 id:"fut_pos", jp:"æœªæ¥å½¢è‚¯å®šï¼ˆã€œã™ã‚‹ã¤ã‚‚ã‚Šã ï¼‰",
 persons:["ben","sen","o","biz","siz"],
 make:(v,p)=>{
  const s = soften(stem(v,"fut"), true, v.verb);
  const a = harmonyAE(s);
  return {
    ben:`${s}${a}ceÄŸim`, sen:`${s}${a}ceksin`, o:`${s}${a}cek`,
    biz:`${s}${a}ceÄŸiz`, siz:`${s}${a}ceksiniz`
  }[p];
 }
},
{
 id:"fut_neg", jp:"æœªæ¥å½¢å¦å®šï¼ˆã€œã—ãªã„ã¤ã‚‚ã‚Šã ï¼‰",
 persons:["ben","sen","o","biz","siz"],
 make:(v,p)=>{
  const s = soften(stem(v,"fut"), true, v.verb);
  return {
    ben:`${s}mayacaÄŸÄ±m`, sen:`${s}mayacaksÄ±n`, o:`${s}mayacak`,
    biz:`${s}mayacaÄŸÄ±z`, siz:`${s}mayacaksÄ±nÄ±z`
  }[p];
 }
},

/* ===== å®Œäº†å½¢ ===== */
{
 id:"past_pos", jp:"å®Œäº†å½¢è‚¯å®šï¼ˆã€œã—ãŸï¼‰",
 persons:["ben","sen","o","biz","siz"],
 make:(v,p)=>{
  const s = soften(stem(v,"past"), false, v.verb);
  const i = harmonyI(s);
  return {
    ben:`${s}d${i}m`, sen:`${s}d${i}n`, o:`${s}d${i}`,
    biz:`${s}d${i}k`, siz:`${s}d${i}nÄ±z`
  }[p];
 }
},
{
 id:"past_neg", jp:"å®Œäº†å½¢å¦å®šï¼ˆã€œã—ãªã‹ã£ãŸï¼‰",
 persons:["ben","sen","o","biz","siz"],
 make:(v,p)=>{
  const s = stem(v,"past");
  const i = harmonyI(s);
  return {
    ben:`${s}mad${i}m`, sen:`${s}mad${i}n`, o:`${s}mad${i}`,
    biz:`${s}mad${i}k`, siz:`${s}mad${i}nÄ±z`
  }[p];
 }
},

/* ===== ä¼èå®Œäº†å½¢ ===== */
{
 id:"rep_pos", jp:"ä¼èå®Œäº†å½¢è‚¯å®šï¼ˆã€œã—ãŸãã†ã ï¼‰",
 persons:["ben","sen","o","biz","siz"],
 make:(v,p)=>{
  const s = stem(v,"past");
  const i = harmonyI(s);
  return {
    ben:`${s}m${i}ÅŸÄ±m`, sen:`${s}m${i}ÅŸsÄ±n`, o:`${s}m${i}ÅŸ`,
    biz:`${s}m${i}ÅŸÄ±z`, siz:`${s}m${i}ÅŸsÄ±nÄ±z`
  }[p];
 }
},
{
 id:"rep_neg", jp:"ä¼èå®Œäº†å½¢å¦å®šï¼ˆã€œã—ãªã‹ã£ãŸãã†ã ï¼‰",
 persons:["ben","sen","o","biz","siz"],
 make:(v,p)=>{
  const s = stem(v,"past");
  const i = harmonyI(s);
  return {
    ben:`${s}mam${i}ÅŸÄ±m`, sen:`${s}mam${i}ÅŸsÄ±n`, o:`${s}mam${i}ÅŸ`,
    biz:`${s}mam${i}ÅŸÄ±z`, siz:`${s}mam${i}ÅŸsÄ±nÄ±z`
  }[p];
 }
},

/* ===== ä¸­ç«‹å½¢ï¼ˆã‚¢ã‚ªãƒªã‚¹ãƒˆï¼‰ ===== */
{
 id:"aor_pos", jp:"ä¸­ç«‹å½¢è‚¯å®šï¼ˆã€œã™ã‚‹ï¼‰",
 persons:["ben","sen","o","biz","siz"],
 make:(v,p)=>{
  const s = stem(v,"aor");
  const a = harmonyAE(s);
  return {
    ben:`${s}${a}rÄ±m`, sen:`${s}${a}rsÄ±n`, o:`${s}${a}r`,
    biz:`${s}${a}rÄ±z`, siz:`${s}${a}rsÄ±nÄ±z`
  }[p];
 }
},
{
 id:"aor_neg", jp:"ä¸­ç«‹å½¢å¦å®šï¼ˆã€œã—ãªã„ï¼‰",
 persons:["ben","sen","o","biz","siz"],
 make:(v,p)=>{
  const s = stem(v,"aor");
  return {
    ben:`${s}mam`, sen:`${s}mazsÄ±n`, o:`${s}maz`,
    biz:`${s}mayÄ±z`, siz:`${s}mazsÄ±nÄ±z`
  }[p];
 }
},

/* ===== å¯èƒ½å½¢ ===== */
{
 id:"abil_pos", jp:"å¯èƒ½å½¢è‚¯å®šï¼ˆã€œã§ãã‚‹ï¼‰",
 persons:["ben","sen","o","biz","siz"],
 make:(v,p)=>{
  const s = stem(v,"fut");
  const a = harmonyAE(s);
  return {
    ben:`${s}${a}bilirim`, sen:`${s}${a}bilirsin`, o:`${s}${a}bilir`,
    biz:`${s}${a}biliriz`, siz:`${s}${a}bilirsiniz`
  }[p];
 }
},
{
 id:"abil_neg", jp:"å¯èƒ½å½¢å¦å®šï¼ˆã€œã§ããªã„ï¼‰",
 persons:["ben","sen","o","biz","siz"],
 make:(v,p)=>{
  const s = stem(v,"fut");
  return {
    ben:`${s}amam`, sen:`${s}amazsÄ±n`, o:`${s}amaz`,
    biz:`${s}amayÄ±z`, siz:`${s}amazsÄ±nÄ±z`
  }[p];
 }
},

/* ===== å‹•åè© ===== */
{ id:"vn_mak", jp:"å‹•åè©ï¼ˆ-mak/-mekï¼‰", persons:["â€”"], make:v=>v.verb },
{ id:"vn_ma", jp:"å‹•åè©ï¼ˆ-ma/-meï¼‰", persons:["â€”"], make:v=>stem(v,"aor")+"ma" },

/* ===== æ„å‘å½¢ ===== */
{
 id:"opt_pos", jp:"æ„å‘å½¢è‚¯å®šï¼ˆã€œã—ã‚ˆã†ï¼‰",
 persons:["ben","biz"],
 make:(v,p)=>p==="ben"?`${stem(v,"fut")}ayÄ±m`:`${stem(v,"fut")}alÄ±m`
},
{
 id:"opt_neg", jp:"æ„å‘å½¢å¦å®šï¼ˆã€œã—ãªã„ã§ãŠã“ã†ï¼‰",
 persons:["ben","biz"],
 make:(v,p)=>p==="ben"?`${stem(v,"fut")}mayayÄ±m`:`${stem(v,"fut")}mayalÄ±m`
},

/* ===== å‘½ä»¤å½¢ ===== */
{ id:"imp_ind_pos", jp:"é–“æ¥å‘½ä»¤å½¢è‚¯å®š", persons:["o"], make:v=>`${stem(v,"aor")}sÄ±n` },
{ id:"imp_ind_neg", jp:"é–“æ¥å‘½ä»¤å½¢å¦å®š", persons:["o"], make:v=>`${stem(v,"aor")}masÄ±n` },

{
 id:"imp_dir_pos", jp:"ç›´æ¥å‘½ä»¤å½¢",
 persons:["sen","siz"],
 make:(v,p)=>p==="sen"?`${stem(v,"aor")}!`:`${stem(v,"aor")}Ä±n!`
},
{
 id:"imp_dir_neg", jp:"ç›´æ¥å‘½ä»¤å½¢å¦å®š",
 persons:["sen","siz"],
 make:(v,p)=>p==="sen"?`${stem(v,"aor")}ma!`:`${stem(v,"aor")}mayÄ±n!`
},
	
{ id:"imp_pol", jp:"ç›´æ¥å‘½ä»¤å½¢ï¼ˆä¸å¯§ï¼‰", persons:["siz"], make:v=>`${stem(v,"aor")}Ä±nÄ±z` },

];

/* ========= èª²ãƒ‡ãƒ¼ã‚¿ï¼ˆç¬¬1ã€œ20èª²ï¼‰ ========= */
const lessons = [

/* --- ç¬¬1èª² --- */
{
 lesson:1,
 title:"è‡ªå·±ç´¹ä»‹ãƒ»ç¾åœ¨",
 verbs:["olmak","gelmek","gitmek","yapmak"],
 forms:["prog_pos","aor_pos"],
 examples:{
  olmak:"Ben Japon'um.",
  gelmek:"Japonya'dan geliyorum.",
  gitmek:"Okula gidiyorum.",
  yapmak:"Ne yapÄ±yorsun?"
 }
},

/* --- ç¬¬2èª² --- */
{
 lesson:2,
 title:"æ—¥å¸¸è¡Œå‹•",
 verbs:["okumak","Ã§alÄ±ÅŸmak","yemek","iÃ§mek"],
 forms:["prog_pos","prog_neg","aor_pos"],
 examples:{
  okumak:"Åimdi TÃ¼rkÃ§e okuyorum.",
  Ã§alÄ±ÅŸmak:"BugÃ¼n Ã§alÄ±ÅŸÄ±yorum.",
  yemek:"Evde yemek yiyorum.",
  iÃ§mek:"Ã‡ay iÃ§iyorum."
 }
},

/* --- ç¬¬3èª² --- */
{
 lesson:3,
 title:"æœªæ¥",
 verbs:["gitmek","gelmek","almak","vermek"],
 forms:["fut_pos","fut_neg"],
 examples:{
  gitmek:"YarÄ±n okula gideceÄŸim.",
  gelmek:"AkÅŸam eve geleceÄŸim.",
  almak:"Yeni bir kitap alacaÄŸÄ±m.",
  vermek:"ArkadaÅŸÄ±ma hediye vereceÄŸim."
 }
},

/* --- ç¬¬4èª² --- */
{
 lesson:4,
 title:"å¥½ã¿ãƒ»å¸Œæœ›",
 verbs:["sevmek","istemek","konuÅŸmak","sormak"],
 forms:["aor_pos","aor_neg","prog_pos"],
 examples:{
  sevmek:"TÃ¼rkÃ§eyi seviyorum.",
  istemek:"Bir Ã§ay istiyorum.",
  konuÅŸmak:"TÃ¼rkÃ§e konuÅŸuyorum.",
  sormak:"Bir soru soruyorum."
 }
},

/* --- ç¬¬5èª² --- */
{
 lesson:5,
 title:"éå»",
 verbs:["gÃ¶rmek","bulmak","bilmek","tanÄ±mak"],
 forms:["past_pos","past_neg"],
 examples:{
  gÃ¶rmek:"DÃ¼n onu gÃ¶rdÃ¼m.",
  bulmak:"AnahtarÄ± buldum.",
  bilmek:"Bu kelimeyi biliyorum.",
  tanÄ±mak:"Onu tanÄ±yorum."
 }
},

/* --- ç¬¬6èª² --- */
{
 lesson:6,
 title:"ä¼èãƒ»çµŒé¨“",
 verbs:["gitmek","yapmak","duymak","tanÄ±mak"],
 forms:["rep_pos","rep_neg"],
 examples:{
  gitmek:"O Japonya'ya gitmiÅŸ.",
  yapmak:"Ã–devini yapmamÄ±ÅŸ.",
  duymak:"Bu haberi duydum.",
  tanÄ±mak:"Onu tanÄ±mÄ±ÅŸ."
 }
},

/* --- ç¬¬7èª² --- */
{
 lesson:7,
 title:"èƒ½åŠ›ãƒ»å¯èƒ½",
 verbs:["anlamak","kullanmak","aÃ§mak","kapatmak"],
 forms:["abil_pos","abil_neg"],
 examples:{
  anlamak:"Bu konuyu anlayabiliyorum.",
  kullanmak:"Bu telefonu kullanabilirim.",
  aÃ§mak:"KapÄ±yÄ± aÃ§abilir misin?",
  kapatmak:"Pencereyi kapatamam."
 }
},

/* --- ç¬¬8èª² --- */
{
 lesson:8,
 title:"ç¿’æ…£",
 verbs:["baÅŸlamak","bitirmek","Ã§Ä±kmak","girmek"],
 forms:["aor_pos","aor_neg"],
 examples:{
  baÅŸlamak:"Ders dokuzda baÅŸlar.",
  bitirmek:"Saat beÅŸte biter.",
  Ã§Ä±kmak:"Evden sekizde Ã§Ä±karÄ±m.",
  girmek:"Ofise giriyorum."
 }
},

/* --- ç¬¬9èª² --- */
{
 lesson:9,
 title:"å‘½ä»¤ãƒ»ä¾é ¼",
 verbs:["bakmak","beklemek","oturmak","getirmek"],
 forms:["imp_dir_pos","imp_dir_neg","imp_pol"],
 examples:{
  bakmak:"Buraya bak!",
  beklemek:"Bir dakika bekleyin.",
  oturmak:"LÃ¼tfen oturun.",
  getirmek:"Bunu getiriniz."
 }
},

/* --- ç¬¬10èª² --- */
{
 lesson:10,
 title:"æ„å‘ãƒ»ææ¡ˆ",
 verbs:["gitmek","yemek","iÃ§mek","gezmek"],
 forms:["opt_pos","opt_neg"],
 examples:{
  gitmek:"Hadi gidelim.",
  yemek:"Birlikte yemek yiyelim.",
  iÃ§mek:"Ã‡ay iÃ§meyelim.",
  gezmek:"Biraz gezelim."
 }
},

/* --- ç¬¬11èª² --- */
{
 lesson:11,
 title:"æ€è€ƒãƒ»åˆ¤æ–­",
 verbs:["dÃ¼ÅŸÃ¼nmek","inanmak","sanmak"],
 forms:["aor_pos","aor_neg"],
 examples:{
  dÃ¼ÅŸÃ¼nmek:"BÃ¶yle dÃ¼ÅŸÃ¼nÃ¼yorum.",
  inanmak:"Buna inanÄ±yorum.",
  sanmak:"Ã–yle sanÄ±yorum."
 }
},

/* --- ç¬¬12èª² --- */
{
 lesson:12,
 title:"ç†ç”±ãƒ»ç¶™ç¶š",
 verbs:["istemek","gerekmek","devam etmek"],
 forms:["aor_pos","prog_pos"],
 examples:{
  istemek:"Gitmek istiyorum.",
  gerekmek:"Gitmem gerekiyor.",
  "devam etmek":"Ders devam ediyor."
 }
},

/* --- ç¬¬13èª² --- */
{
 lesson:13,
 title:"å¤‰åŒ–",
 verbs:["deÄŸiÅŸmek","artmak","azalmak"],
 forms:["aor_pos","past_pos"],
 examples:{
  deÄŸiÅŸmek:"Hava deÄŸiÅŸti.",
  artmak:"Fiyatlar arttÄ±.",
  azalmak:"YaÄŸmur azaldÄ±."
 }
},

/* --- ç¬¬14èª² --- */
{
 lesson:14,
 title:"ä¾é ¼ãƒ»è¨±å¯",
 verbs:["rica etmek","izin vermek","sormak"],
 forms:["imp_ind_pos","imp_ind_neg"],
 examples:{
  "rica etmek":"Bir ÅŸey rica ediyorum.",
  "izin vermek":"Girmene izin veriyorum.",
  sormak:"Bir ÅŸey sorabilir miyim?"
 }
},

/* --- ç¬¬15èª² --- */
{
 lesson:15,
 title:"å®Œäº†ãƒ»çµæœ",
 verbs:["bitmek","kalmak"],
 forms:["past_pos","rep_pos"],
 examples:{
  bitmek:"ToplantÄ± bitti.",
  kalmak:"Evde kalmÄ±ÅŸ."
 }
},

/* --- ç¬¬16èª² --- */
{
 lesson:16,
 title:"æ¡ä»¶ãƒ»å­˜åœ¨",
 verbs:["olmak","bulunmak"],
 forms:["aor_pos","aor_neg"],
 examples:{
  olmak:"Zaman olursa giderim.",
  bulunmak:"Burada market bulunur."
 }
},

/* --- ç¬¬17èª² --- */
{
 lesson:17,
 title:"å—å‹•",
 verbs:["yapÄ±lmak","sÃ¶ylenmek"],
 forms:["aor_pos","past_pos"],
 examples:{
  yapÄ±lmak:"Bu iÅŸ burada yapÄ±lÄ±r.",
  sÃ¶ylenmek:"Bu sÃ¶z sÃ¶ylendi."
 }
},

/* --- ç¬¬18èª² --- */
{
 lesson:18,
 title:"è¨ˆç”»ãƒ»æ±ºå®š",
 verbs:["planlamak","karar vermek"],
 forms:["fut_pos","fut_neg"],
 examples:{
  planlamak:"Seyahat planlÄ±yorum.",
  "karar vermek":"Gitmeye karar verdim."
 }
},

/* --- ç¬¬19èª² --- */
{
 lesson:19,
 title:"æ„Ÿæƒ…",
 verbs:["korkmak","sevinmek"],
 forms:["aor_pos","past_pos"],
 examples:{
  korkmak:"KÃ¶pekten korkuyorum.",
  sevinmek:"Ã‡ok sevindim."
 }
},

/* --- ç¬¬20èª² --- */
{
 lesson:20,
 title:"ç·åˆ",
 verbs:["hatÄ±rlamak","unutmak"],
 forms:["past_pos","past_neg"],
 examples:{
  hatÄ±rlamak:"Onu hatÄ±rlÄ±yorum.",
  unutmak:"AdÄ±nÄ± unuttum."
 }
}

];

/* ========= å…±é€š ========= */
const rand = a => a[Math.floor(Math.random() * a.length)];

/* ========= DOM ========= */
const lessonSelect = document.getElementById("lessonSelect");
const questionEl   = document.getElementById("question");
const choicesEl    = document.getElementById("choices");
const exampleBox   = document.getElementById("exampleBox");
const nextBtn      = document.getElementById("nextBtn");
const toggleExample= document.getElementById("toggleExample");

/* ========= èª²ã‚»ãƒ¬ã‚¯ã‚¿ç”Ÿæˆ ========= */
lessons.forEach(l=>{
  const op = document.createElement("option");
  op.value = l.lesson;
  op.textContent = `ç¬¬${l.lesson}èª²ï¼š${l.title}`;
  lessonSelect.appendChild(op);
});

/* ========= ç¾åœ¨ã®å•é¡Œ ========= */
let current = null;

/* ========= å•é¡Œç”Ÿæˆ ========= */
function newQuestion(){
  const lesson = lessons.find(l => l.lesson == lessonSelect.value);

  const verbName = rand(lesson.verbs);
  const verb = verbs.find(v => v.verb === verbName);

  const formId = rand(lesson.forms);
  const form = grammarForms.find(f => f.id === formId);

  const person = rand(form.persons);

  const answer = form.make(verb, person);

  current = {
    verb,
    form,
    person,
    answer,
    example: lesson.examples[verb.verb] || ""
  };

  // è¡¨ç¤º
  questionEl.textContent =
    `${verb.jp} ï¼ ${form.jp} ï¼ ${person}`;

  renderChoices(answer, verb, form, person);
  exampleBox.style.display = "none";
}

/* ========= é¸æŠè‚¢ç”Ÿæˆ ========= */
function renderChoices(correct, verb, form, person){
  choicesEl.innerHTML = "";

  const opts = [correct];

  while(opts.length < 4){
    const p = rand(form.persons);
    const o = form.make(verb, p);
    if(!opts.includes(o)) opts.push(o);
  }

  opts.sort(()=>Math.random()-0.5);

  opts.forEach(o=>{
    const btn = document.createElement("button");
    btn.className = "choiceBtn";
    btn.textContent = o;
    btn.onclick = ()=>{
      if(o === correct){
        btn.classList.add("correct");
      } else {
        btn.classList.add("wrong");
      }
    };
    choicesEl.appendChild(btn);
  });
}

/* ========= ä¾‹æ–‡è¡¨ç¤º ========= */
toggleExample.onclick = ()=>{
  if(!current) return;
  exampleBox.style.display =
    exampleBox.style.display === "none" ? "block" : "none";

  exampleBox.textContent =
    current.example || current.answer;
};

/* ========= ã‚¤ãƒ™ãƒ³ãƒˆ ========= */
nextBtn.onclick = newQuestion;
lessonSelect.onchange = newQuestion;

/* ========= åˆæœŸåŒ– ========= */
lessonSelect.value = 1;
newQuestion();
</script>
</body>
</html>

